package fr.xs.cms.services.ajax.menu;import java.util.Date;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import fr.xs.cms.core.html.HtmlObject;import fr.xs.cms.core.html.objects.HtmlForm;import fr.xs.cms.core.html.objects.HtmlInnerContent;import fr.xs.cms.core.html.objects.HtmlInput;import fr.xs.cms.core.html.objects.HtmlInput.Type;import fr.xs.cms.core.html.objects.HtmlLink;import fr.xs.cms.core.html.properties.HtmlType;import fr.xs.jtk.tools.Debugger;public class MenuServlet {	static final public String NAME       		= "Menu";	static final public String URL       		= "/";	static final public String METHOD			= "post";		public class PageContent extends HtmlInnerContent {		static final public String menuCommand      = "command";		static final public String menuDestination  = "destination";					public class MenuScript extends Script {			public String autoFill() {				return "<script>"//						+ form.getInput(menuCommand)			.Script().setValue("null")//						+ form.getInput(menuDestination)		.Script().setValue("null")						+ "</script>";			}		}				HtmlForm   form;		MenuScript extra_script;			public PageContent(String _id, String _module, String _method) {			super();			extra_script = new MenuScript();						form = new HtmlForm(_id, _module, _method);//			form.addInput( new HtmlInput(Type.hidden, menuCommand) );//			form.addInput( new HtmlInput(Type.hidden, menuDestination) );				}				public MenuScript ExtraScript() { return extra_script; }		@Override public HtmlType Type() {			return HtmlType.FUNCTION;		}		@Override public String toHtml() {			return  form.toHtml() + ExtraScript().autoFill();		}		}	public class Script {	}//	Map<String, ServletInterface> db     = null;	private PageContent            		view   = null;	private Script	             		script = null;		public MenuServlet() {		Debugger.log("MenuServlet");//		if(db == null)//			db = new HashMap<String, ServletInterface>();		if(view == null)			view = new PageContent(NAME, URL, METHOD);		if(script == null)			script = new Script();	}	//	public void addModule(ServletInterface _module) {//		db.put(_module.Name(), _module);//	}	public HtmlObject addHtmlLink(HtmlObject _inc, String _dest) {		return new HtmlLink().setConnection(_dest, false, false)							 .addChild(_inc);	}	public HtmlObject addAjaxLink(HtmlObject _inc, String _dest, String _url, boolean _post, boolean _async) {		return new HtmlLink().setConnection(_dest, false, false)							 .setDestination(_dest)							 .setName("test" + new Date().getTime())							 .addChild(_inc);	}		public HtmlObject getHtmlAutoQuery(HtmlObject _inc, String _dest) {		return null;//new HtmlLink().setContent(_inc).setURL(_dest);	}	public HtmlObject getHtmlLinkFor(HtmlObject _inc/*, ServletInterface _mod*/) {		return new HtmlObject(HtmlType.UNKNOWN) {			HtmlObject child;			HtmlObject setContent(HtmlObject _obj) { child = _obj; return this; }			@Override			public HtmlType Type() { return HtmlType.A; }			@Override			public String toHtml() {//				return "<a href='javascript: submit();'>" + child.toHtml() + "</a>";				return "<a href='/'>" + child.toHtml() + "</a>";			}		}.setContent(_inc);	}	public HtmlObject getOnClickEventFor(HtmlObject _inc/*, ServletInterface _mod*/) {		return null;	}						public PageContent View()   { return view; }	public Script      Script() { return script; }		public boolean processRequest(HttpServletRequest request, HttpServletResponse response) {//		String module      = request.getParameter(PageContent.menuCommand);//		String destination = request.getParameter(PageContent.menuDestination);//		if(getModule(module) != null)//			getModule(module).processRequest(request);		return false;	}}